(this.webpackJsonpdiversnetwork=this.webpackJsonpdiversnetwork||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(9),c=a.n(r),i=a(17),s=a(35),o=a(68),l=(a(92),a(78)),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE":return e.filter((function(e){return e._id!==t.payload}));case"UPDATE":case"LIKE":return e.map((function(e){return e.id===t.payload._id?t.payload:e}));case"FETCH_ALL":return t.payload;case"CREATE":return[].concat(Object(l.a)(e),[t.payload]);default:return e}},d=Object(s.b)({posts:u}),j=a(49),p=a(154),b=a(155),m=a(150),f=a(158),x=a(153),h=a(19),O=a.n(h),v=a(36),g=a(37),y=a.n(g),N="http://localhost:5000/posts",C=function(e,t){return y.a.patch("".concat(N,"/").concat(e),t)},E=function(e){return y.a.delete("".concat(N,"/").concat(e))},D=function(e){return y.a.patch("".concat(N,"/").concat(e,"/likePost"))},w=function(){return function(){var e=Object(v.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get(N);case 3:a=e.sent,n=a.data,t({type:"FETCH_ALL",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},k=a(147),T=a(149),I=a(151),L=a(157),A=a(76),S=a.n(A),W=a(75),z=a.n(W),_=a(74),F=a.n(_),B=a(69),R=a.n(B),M=a(144),P=Object(M.a)((function(){return{card:{padding:"15px"},title:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between"},postEntry:{padding:"3px"},image:{height:"250px",borderRadius:"7px"},cardActions:{justifyContent:"space-between",paddingTop:"15px"}}})),U=a(4),H=function(e){var t=e.post,a=e.setCurrentId,n=P(),r=Object(i.b)();return Object(U.jsxs)(k.a,{className:n.card,children:[Object(U.jsx)(T.a,{component:"div",className:n.image,image:t.selectedFile,title:t.title}),Object(U.jsxs)("div",{className:n.content,children:[Object(U.jsxs)("div",{className:n.title,children:[Object(U.jsx)(m.a,{variant:"h4",className:n.postEntry,children:t.creator}),t.diveNumber&&Object(U.jsxs)(m.a,{variant:"h6",className:n.postEntry,children:["Dive #",t.diveNumber]})]}),Object(U.jsxs)(m.a,{variant:"h6",className:n.postEntry,children:["Location: ",t.location]}),Object(U.jsxs)(m.a,{variant:"body1",className:n.postEntry,children:["Maximum Depth: ",t.maxDepth]}),Object(U.jsxs)(m.a,{variant:"body1",className:n.postEntry,children:["Dive Duration: ",t.duration]}),!1!==t.buddy&&Object(U.jsxs)(m.a,{variant:"body1",className:n.postEntry,children:["Buddy: ",t.buddy]}),Object(U.jsxs)(m.a,{variant:"body1",className:n.postEntry,children:["Dive Logged: ",R()(t.createdAt).fromNow()]})]}),Object(U.jsx)("div",{className:n.details,children:!1!==t.tags&&Object(U.jsxs)(m.a,{variant:"body2",color:"textSecondary",children:[t.tags.slice(0,4).map((function(e){return"#".concat(e," ")})),". . ."]})}),Object(U.jsxs)(I.a,{className:n.cardActions,children:[Object(U.jsxs)(L.a,{color:"primary",size:"small",onClick:function(){return a(t._id)},children:[Object(U.jsx)(F.a,{fontSize:"medium"}),"\xa0Edit"]}),Object(U.jsxs)(L.a,{size:"small",color:"primary",onClick:function(){return r((e=t._id,function(){var t=Object(v.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E(e);case 3:a({type:"DELETE",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e},children:[Object(U.jsx)(z.a,{fontSize:"medium"}),"\xa0Delete"]}),Object(U.jsxs)(L.a,{size:"small",color:"primary",onClick:function(){return r((e=t._id,function(){var t=Object(v.a)(O.a.mark((function t(a){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D(e);case 3:n=t.sent,r=n.data,a({type:"UPDATE",payload:r}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("error in actions"),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()));var e},children:[Object(U.jsx)(S.a,{fontSize:"medium"}),"\xa0Likes:\xa0",t.likeCount]})]})]})},J=Object(M.a)((function(){return{color:{color:"blue"}}})),K=a(152),V=function(e){var t=e.setCurrentId,a=Object(i.c)((function(e){return e.posts})),n=Object(i.c)((function(e){return e.users})),r=J();return a.length?Object(U.jsxs)(x.a,{className:r.container,container:!0,alignItems:"stretch",spacing:3,children:[a.map((function(e){return Object(U.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(U.jsx)(H,{post:e,setCurrentId:t})},e._id)})),Object(U.jsx)("h1",{children:n})]}):Object(U.jsx)(K.a,{})},q=a(11),G=a(80),Q=a(156),X=a(77),Y=a.n(X),Z=Object(M.a)((function(){return{paper:{padding:"25px 15px"},form:{display:"flex",flexDirection:"column"},input:{marginTop:"20px"},fileInput:{marginTop:"20px"},button:{marginTop:"20px",borderRadius:"30px"}}})),$=function(e){var t=e.currentId,a=e.setCurrentId,r=Object(n.useState)({creator:"",diveNumber:"",location:"",notes:"",buddy:"",tags:"",maxDepth:"",duration:"",selectedFile:""}),c=Object(j.a)(r,2),s=c[0],o=c[1],l=Object(i.c)((function(e){return t?e.posts.find((function(e){return e._id===t})):null})),u=Z(),d=Object(i.b)();Object(n.useEffect)((function(){l&&o(l)}),[l]),Object(n.useEffect)((function(){d(w())}),[d]);var p=function(){a(null),o({creator:"",diveNumber:"",location:"",notes:"",buddy:"",tags:"",maxDepth:"",duration:"",selectedFile:""})};return Object(U.jsx)(G.a,{className:u.paper,children:Object(U.jsxs)("form",{autoComplete:"off",noValidate:!0,className:"".concat(u.form),onSubmit:function(e){e.preventDefault(),d(t?function(e,t){return function(){var a=Object(v.a)(O.a.mark((function a(n){var r,c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C(e,t);case 3:r=a.sent,c=r.data,n({type:"UPDATE",payload:c}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(t,s):function(e){return function(){var t=Object(v.a)(O.a.mark((function t(a){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=e,y.a.post(N,c);case 3:n=t.sent,r=n.data,a({type:"CREATE",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var c}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(s)),p()},children:[Object(U.jsx)(m.a,{variant:"h4",children:t?"Edit your Log":"Create a new Log!"}),Object(U.jsx)(Q.a,{className:u.input,name:"creator",variant:"outlined",label:"Creator",fullWidth:!0,value:s.creator,onChange:function(e){return o(Object(q.a)(Object(q.a)({},s),{},{creator:e.target.value}))}}),Object(U.jsx)(Q.a,{className:u.input,name:"diveNumber",variant:"outlined",label:"Dive Number",fullWidth:!0,value:s.diveNumber,onChange:function(e){return o(Object(q.a)(Object(q.a)({},s),{},{diveNumber:e.target.value}))}}),Object(U.jsx)(Q.a,{className:u.input,name:"location",variant:"outlined",label:"Location",fullWidth:!0,value:s.location,onChange:function(e){return o(Object(q.a)(Object(q.a)({},s),{},{location:e.target.value}))}}),Object(U.jsx)(Q.a,{className:u.input,name:"buddy",variant:"outlined",label:"Dive Buddy",fullWidth:!0,value:s.buddy,onChange:function(e){return o(Object(q.a)(Object(q.a)({},s),{},{buddy:e.target.value}))}}),Object(U.jsx)(Q.a,{className:u.input,name:"notes",variant:"outlined",label:"Notes",fullWidth:!0,value:s.notes,onChange:function(e){return o(Object(q.a)(Object(q.a)({},s),{},{notes:e.target.value}))}}),Object(U.jsx)(Q.a,{className:u.input,name:"maxDepth",variant:"outlined",label:"Maximum Depth (M)",fullWidth:!0,value:s.maxDepth,onChange:function(e){return o(Object(q.a)(Object(q.a)({},s),{},{maxDepth:e.target.value}))}}),Object(U.jsx)(Q.a,{className:u.input,name:"duration",variant:"outlined",label:"Duration (Mins)",fullWidth:!0,value:s.duration,onChange:function(e){return o(Object(q.a)(Object(q.a)({},s),{},{duration:e.target.value}))}}),Object(U.jsx)(Q.a,{className:u.input,name:"tags",variant:"outlined",label:"Tags (seperate by comma)",fullWidth:!0,value:s.tags,onChange:function(e){return o(Object(q.a)(Object(q.a)({},s),{},{tags:e.target.value.split(",")}))}}),Object(U.jsx)("div",{className:u.fileInput,children:Object(U.jsx)(Y.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return o(Object(q.a)(Object(q.a)({},s),{},{selectedFile:t}))}})}),Object(U.jsx)(L.a,{className:u.button,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0,children:"Submit"}),Object(U.jsx)(L.a,{className:u.button,variant:"contained",color:"secondary",size:"small",onClick:p,fullWidth:!0,children:"Clear"})]})})},ee=(a.p,Object(M.a)((function(){return{container:{display:"flex",flexDirection:"column"},cardContainer:{marginTop:"24px"},appBar:{borderRadius:15,margin:"40px 0",padding:"40px",justifyContent:"center"},font:{display:"flex",justifyContent:"center",fontSize:"2rem",margin:"40px"},image:{height:"180px",justifyContent:"center",margin:"10px auto"}}}))),te=function(){var e=ee(),t=Object(i.b)(),a=Object(n.useState)(null),r=Object(j.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){t(w())}),[c,t]),Object(U.jsxs)(p.a,{className:e.container,maxwidth:"lg",children:[Object(U.jsx)(b.a,{className:e.appBar,position:"static",color:"inherit",children:Object(U.jsx)(m.a,{color:"primary",variant:"h2",align:"center",children:"Social Divers Log"})}),Object(U.jsx)(m.a,{className:e.font,variant:"subtitle1",align:"center",children:"A free space for divers to log dives and share their experiences."}),Object(U.jsx)(f.a,{in:!0,children:Object(U.jsx)(p.a,{className:e.cardContainer,children:Object(U.jsxs)(x.a,{container:!0,justifyContent:"space-between","align-items":"stretch",spacing:3,children:[Object(U.jsx)(x.a,{item:!0,xs:12,sm:4,children:Object(U.jsx)($,{currentId:c,setCurrentId:s})}),Object(U.jsx)(x.a,{item:!0,xs:12,sm:8,children:Object(U.jsx)(V,{setCurrentId:s})})]})})})]})},ae=Object(s.d)(d,Object(s.c)(Object(s.a)(o.a)));c.a.render(Object(U.jsx)(i.a,{store:ae,children:Object(U.jsx)(te,{})}),document.getElementById("root"))},92:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.8c86f376.chunk.js.map